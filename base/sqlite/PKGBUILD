#!/bin/bash

pkgname=sqlite
pkgver=3081002
archive=$pkgname-autoconf-$pkgver.tar.gz
sum=c2f2c17d3dc4c4e179d35cc04e4420636d48a152

dstdir=$mkToolchainBase

build() {
  download https://www.sqlite.org/2015/$archive
  check $archive $sum
  extract $archive

  pushd $pkgname-autoconf-$pkgver
    message "Configuring $pkgname"
    ./configure --build=$TARGET --prefix="$dstdir" --disable-static
    message "Compiling $pkgname"
    make
  popd
}

package() {
  make -C $pkgname-autoconf-$pkgver install
  strip "$dstdir"/bin/sqlite3
  strip "$dstdir"/lib/libsqlite3.so.?.?.?
  compress_doc "$dstdir"/share/man/man1/sqlite3.1
  update_linker_cache
}
