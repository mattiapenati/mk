#!/bin/bash

pkgname=gmp
pkgver=6.0.0
archive=$pkgname-${pkgver}a.tar.xz
sum=1aaf78358ab9e34aeb61f3ae08174ee9118ece98

dstdir=$mkToolchainBase

build() {
  download https://gmplib.org/download/gmp/$archive
  check $archive $sum
  extract $archive

  pushd $pkgname-$pkgver
    message "Configuring $pkgname"
    ./configure --build=$TARGET --prefix="$dstdir" --enable-cxx --enable-fat \
                --disable-static
    message "Compiling $pkgname"
    make
  popd
}

package() {
  make -C $pkgname-$pkgver install
  strip "$dstdir"/lib/{libgmp.so,libgmpxx.so}.*.?.?
  reset_rpath "$dstdir"/lib/libgmpxx.so.?.?.?
  compress_doc "$dstdir"/share/info/gmp.*
  update_linker_cache
}
